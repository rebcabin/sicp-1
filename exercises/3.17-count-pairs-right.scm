; Traverse the structure, maintaining an auxiliary data structure that is used to keep track of which pairs have already been counted

; laziness: global list + append! will this work?